import{c as O}from"./chunk-CZB6LIOK.js";import"./chunk-A6EJ5R3F.js";import{$a as c,Aa as E,La as f,Ma as _,Na as h,Oa as p,Pa as x,Ua as a,V as v,Va as l,W as b,Wa as u,Xa as C,Ya as G,Za as M,_a as s,ab as m,bb as w,qa as g,ra as d}from"./chunk-SYA35K3H.js";function S(o,e){if(o&1&&(a(0,"div",5),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function k(o,e){if(o&1&&(a(0,"div",6),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function T(o,e){if(o&1&&(a(0,"div",7),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function y(o,e){if(o&1&&(a(0,"div",8),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function I(o,e){if(o&1&&(a(0,"div",9),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function P(o,e){if(o&1&&(a(0,"div",10),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function $(o,e){if(o&1&&(a(0,"div",11),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function z(o,e){if(o&1&&(a(0,"div",12),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function B(o,e){if(o&1&&(a(0,"div",13),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function D(o,e){if(o&1&&(a(0,"div",14),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function H(o,e){if(o&1&&(a(0,"div",15),c(1),l()),o&2){let t=s().$implicit;d(),m(t)}}function R(o,e){o&1&&u(0,"div",16)}function L(o,e){if(o&1&&f(0,S,2,1,"div",5)(1,k,2,1,"div",6)(2,T,2,1,"div",7)(3,y,2,1,"div",8)(4,I,2,1,"div",9)(5,P,2,1,"div",10)(6,$,2,1,"div",11)(7,z,2,1,"div",12)(8,B,2,1,"div",13)(9,D,2,1,"div",14)(10,H,2,1,"div",15)(11,R,1,0,"div",16),o&2){let t,i=e.$implicit;_((t=i)===2?0:t===4?1:t===8?2:t===16?3:t===32?4:t===64?5:t===128?6:t===256?7:t===512?8:t===1024?9:t===2048?10:11)}}function j(o,e){if(o&1&&p(0,L,12,1,null,null,h),o&2){let t=e.$implicit;x(t)}}function A(o,e){if(o&1){let t=C();a(0,"div",4)(1,"h2",17),c(2,"Game Over!"),l(),u(3,"br"),a(4,"button",18),M("click",function(){v(t);let n=s();return b(n.restart())}),c(5,"Restart"),l()()}}var F=class o{board=[[0,0,0,0],[0,2,0,0],[0,0,0,0],[0,0,0,0]];score=0;gameOver=!1;stateChange=!1;restart(){this.board=[[0,0,0,0],[0,2,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.gameOver=!1}hammermanager;constructor(){this.hammermanager=new Hammer.Manager(document.body),this.hammermanager.add(new Hammer.Swipe),this.hammermanager.on("swipeleft",()=>{if(!this.gameOver){let e=this.board.map(t=>[...t]);this.moveLeft(),this.handleGameState(e)}}),this.hammermanager.on("swiperight",()=>{if(!this.gameOver){let e=this.board.map(t=>[...t]);this.moveRight(),this.handleGameState(e)}}),this.hammermanager.on("swipeup",()=>{if(!this.gameOver){let e=this.board.map(t=>[...t]);this.moveUp(),this.handleGameState(e)}}),this.hammermanager.on("swipedown",()=>{if(!this.gameOver){let e=this.board.map(t=>[...t]);this.moveDown(),this.handleGameState(e)}})}ngOnDestroy(){this.gameOver=!0,this.hammermanager.destroy()}handleGameState(e){if(this.stateChange=JSON.stringify(e)!==JSON.stringify(this.board),this.isGameOver()){this.gameOver=!0;return}this.stateChange&&this.addRandomTile()}moveUp(){for(let e=0;e<4;e++){let t=0;for(let i=0;i<4;i++){let n=this.board[i][e];if(n==0)continue;this.board[i][e]=0;let r=this.board[t][e];r!=n&&r!=0&&t++,this.board[t][e]+=n,this.score=Math.max(this.score,this.board[t][e]),r==n&&t++}}}moveDown(){for(let e=0;e<4;e++){let t=3;for(let i=3;i>=0;i--){let n=this.board[i][e];if(n==0)continue;this.board[i][e]=0;let r=this.board[t][e];r!=n&&r!=0&&t--,this.board[t][e]+=n,this.score=Math.max(this.score,this.board[t][e]),r==n&&t--}}}moveLeft(){for(let e=0;e<4;e++){let t=0;for(let i=0;i<4;i++){let n=this.board[e][i];if(n==0)continue;this.board[e][i]=0;let r=this.board[e][t];r!=n&&r!=0&&t++,this.board[e][t]+=n,this.score=Math.max(this.score,this.board[e][t]),r==n&&t++}}}moveRight(){for(let e=0;e<4;e++){let t=3;for(let i=3;i>=0;i--){let n=this.board[e][i];if(n==0)continue;this.board[e][i]=0;let r=this.board[e][t];r!=n&&r!=0&&t--,this.board[e][t]+=n,this.score=Math.max(this.score,this.board[e][t]),r==n&&t--}}}addRandomTile(){let e=Math.floor(Math.random()*4),t=Math.floor(Math.random()*4),i=Math.random()<.9?2:4;for(;this.board[e][t]!=0&&!this.isGameOver();)e=Math.floor(Math.random()*4),t=Math.floor(Math.random()*4);this.board[e][t]=i}isGameOver(){for(let e of this.board)for(let t of e)if(t==0)return!1;return!0}updateState(e){if(this.gameOver)return;let t=this.board.map(i=>[...i]);switch(e.key){case"ArrowUp":this.moveUp();break;case"ArrowDown":this.moveDown();break;case"ArrowLeft":this.moveLeft();break;case"ArrowRight":this.moveRight();break;default:return}this.handleGameState(t)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-g2048"]],hostBindings:function(t,i){t&1&&G("keydown",function(r){return i.updateState(r)},g)},decls:10,vars:2,consts:[[1,"text-center"],[1,"container","position-relative",2,"height","600px"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"board"],[1,"position-absolute","top-50","start-50","translate-middle","text-center",2,"background-color","white","padding","20px","border","1px solid green","width","200px"],[1,"cell","color2"],[1,"cell","color4"],[1,"cell","color8"],[1,"cell","color16"],[1,"cell","color32"],[1,"cell","color64"],[1,"cell","color128"],[1,"cell","color256"],[1,"cell","color512"],[1,"cell","color1024"],[1,"cell","color2048"],[1,"cell"],[1,"text-info"],[1,"btn","btn-outline-primary",3,"click"]],template:function(t,i){t&1&&(a(0,"h1",0),c(1,"2048 Game"),l(),a(2,"div",1)(3,"div",2)(4,"h2",0),c(5),l(),a(6,"div",3),p(7,j,2,0,null,null,h),f(9,A,6,0,"div",4),l()()()),t&2&&(d(5),w("Score: ",i.score),d(2),x(i.board),d(2),_(i.gameOver?9:-1))},dependencies:[O],styles:[".board[_ngcontent-%COMP%]{border:2px solid #000000;background-color:#bbada0;position:relative;display:grid;grid-template-columns:repeat(4,60px)}.cell[_ngcontent-%COMP%]{width:60px;height:60px;border:1px solid #000000;text-align:center;justify-content:center;align-items:center;background-color:#4e4e4e}.color2[_ngcontent-%COMP%]{background-color:#443728;color:#fff;font-size:30px}.color4[_ngcontent-%COMP%]{background-color:#c2b280;color:#fff;font-size:30px}.color8[_ngcontent-%COMP%]{background-color:#ffb74d;color:#fff;font-size:30px}.color16[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff;font-size:30px}.color32[_ngcontent-%COMP%]{background-color:#f57c20;color:#fff;font-size:30px}.color64[_ngcontent-%COMP%]{background-color:#ef6c00;color:#fff;font-size:30px}.color128[_ngcontent-%COMP%]{background-color:#e65100;color:#fff;font-size:25px}.color256[_ngcontent-%COMP%]{background-color:#d84315;color:#fff;font-size:25px}.color512[_ngcontent-%COMP%]{background-color:#c62828;color:#fff;font-size:25px}.color1024[_ngcontent-%COMP%]{background-color:#b71c1c;color:#fff;font-size:20px}.color2048[_ngcontent-%COMP%]{background-color:#880e4f;color:#fff;font-size:20px}"]})};export{F as G2048};
